<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carte Interactive avec Popup et Phrase Supplémentaire</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <style>
    #map {
      height: 100vh;
    }
    .popup-content {
      text-align: center;
    }
    .popup-content img {
      max-width: 100px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script>
    // Initialisation de la carte
    const map = L.map('map').setView([20, 0], 2);
  
    // Couche de base OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.jpg', {
      maxZoom: 18,
    }).addTo(map);
  
    // Liste des pays avec leurs données (nom, pourcentage, image, couleurs, et info supplémentaire)
    const specialCountries = {
      "Spain": { percentage: "30%", image: "https://images.ctfassets.net/bth3mlrehms2/2T2y3fo3Z60l0XXMwjtstO/b49fd2cafa39dce2eed8791091e16ec3/Europe_Espagne_Barcelone_Sagrada_Familia.jpg?w=3841&h=2160&fl=progressive&q=50&fm=jpg", color: "#3f3134", hoverColor: "#D1ACB6", info: "En 2022, l'Espagne a été le pays le plus visité avec plus de 71 Millions de visiteurs à l'année. Grâce à ses nombreux paysages et ses villes mythiques ytelles que Madrid, Barcelone ou Valence, les touristes arrivent en masse pour les découvrir." },
      "United States of America": { percentage: "21%", image: "https://i.f1g.fr/media/cms/orig/2023/11/13/277475850b79db3dbbc7e2c7a04bf892787229f808c2a5912a67a513d878a2a7.jpg", color: "#57333b", hoverColor: "#D1ACB6", info: "Il s'agit d'une deuxième pays le plus visité au monde en 2022 avec plus de 50 millions de visiteurs en un an et notamment grâce à sa grandes surfaces et à sa fameuse route 66" },
      "France": { percentage: "20%", image: "https://www.breizhclub.bzh/blog/wp-content/uploads/2023/07/ENTETE.webp", color: "#6f3542", hoverColor: "#D1ACB6", info: "La France ferme le podium en prennant la troisième place dans les pays les plus visités en 2022, avec 48.4 millions de visiteurs et elle mérite emplement cette place grâce à ses paysages variés" },
      "Mexico": { percentage: "16%", image: "https://www.a2pasdumonde.fr/wp-content/uploads/2018/02/mexique-tulum.jpg", color: "#873749", hoverColor: "#D1ACB6", info: "En 2022, le Mexique se retrouve au pied du podium, en étant quatrième avec 38.33 millions de visiteurs." },
      "Morocco": { percentage: "4.5%", image: "https://www.terdav.com/Content/img/mag/vignettes/grande/1503.jpg", color: "#9f394f", hoverColor: "#D1ACB6", info: "En 2022, le Maroc se retrouve en cinquième position avec 10.87 millions de visiteurs. Il s'agit du premier pays africain à se retrouver dans le classement." },
      "China": { percentage: "3.5%", image: "https://blog.action-sejours.com/wp-content/uploads/2020/04/muraille-de-chine.jpg", color: "#af2442", hoverColor: "#D1ACB6", info: "En 2022, la Chine a enregistré plus de 7.87 millions de visiteurs dans son pays ce qui fait d'elle le sixième pays le plus visité cette année là." },
      "India": { percentage: "3%", image: "https://upload.wikimedia.org/wikipedia/commons/7/74/Taj_Mahal%2C_Agra%2C_India_edit2.jpg", color: "#D13255", hoverColor: "#D1ACB6", info: "En 2022, l'Inde a enregistré plus de 6.99 millions de visiteurs dans son pays ce qui fait de lui le septième pays le plus visité cette année là juste devant l'Afrique du Sud." },
      "South Africa": { percentage: "2%", image: "https://images.ctfassets.net/rc3dlxapnu6k/7MlCb2W2dtfLl1sPiCv4fd/dbb9d5a8c091562012d6bcbe1336f1e5/iStock-477451698.jpg?w=2092&h=1176&fl=progressive&q=50&fm=jpg", color: "#DC143C", hoverColor: "#D1ACB6", info: "En 2022, l'Afrique du Sud se retrouve en huitième position de notre classement avec presque 6 millions de visiteurs cette année là." },
    };
  
    // Charger les données GeoJSON pour tous les pays
    const geojsonUrl = "https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json";
  
    fetch(geojsonUrl)
      .then(response => response.json())
      .then(data => {
        L.geoJSON(data, {
          filter: (feature) => {
        // Exclure l'Antarctique
        return feature.properties.name !== "Antarctica";
      },
          style: (feature) => {
            const countryName = feature.properties.name;
            if (specialCountries[countryName]) {
              return {
                color: "#333",
                weight: 1,
                fillColor: specialCountries[countryName].color,
                fillOpacity: 0.7,
              };
            }
            return {
              color: "#333",
              weight: 1,
              fillColor: "#ccc",
              fillOpacity: 0.7,
            };
          },
          onEachFeature: (feature, layer) => {
            const countryName = feature.properties.name;
  
            // Interaction pour tous les pays
            layer.on({
              mouseover: (e) => {
                const special = specialCountries[countryName];
                if (special) {
                  e.target.setStyle({ fillColor: special.hoverColor, fillOpacity: 1 });
  
                  // Afficher le popup
                  const popupContent = `
                    <div class="popup-content">
                      <strong>${countryName}</strong><br>
                      Pourcentage : ${special.percentage}<br>
                      <span>${special.info}</span><br>
                      <img src="${special.image}" alt="${countryName}">
                    </div>
                  `;
                  const popup = L.popup()
                    .setLatLng(e.latlng)
                    .setContent(popupContent)
                    .openOn(map);
                }
              },
              mouseout: (e) => {
                const special = specialCountries[countryName];
                if (special) {
                  e.target.setStyle({ fillColor: special.color, fillOpacity: 0.7 });
                } else {
                  e.target.setStyle({ fillColor: '#ccc', fillOpacity: 0.7 });
                }
                map.closePopup(); // Ferme le popup
              },
              click: (e) => {
                // Zoom sur le pays
                map.fitBounds(layer.getBounds());
              },
            });
          },
        }).addTo(map);
      });
  </script>
  
</body>
</html>

// 